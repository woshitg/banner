<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
		<title></title>
	</head>
	<script src="js/jquery-1.8.3.min.js"></script>
	<script src="js/jquery-labelauty.js"></script>
	<link rel="stylesheet" href="css/weui.min.css" />
	<link rel="stylesheet" href="css/jquery-labelauty.css">
	<script>
		(function (doc, win) {
		        var docEl = doc.documentElement,
		            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
		            recalc = function () {
		                var clientWidth = docEl.clientWidth;
		                if (!clientWidth) return;
		                if(clientWidth>=750){
		                    docEl.style.fontSize = '100px';
		                }else{
		                    docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
		                }
		            };
		
		        if (!doc.addEventListener) return;
		        win.addEventListener(resizeEvt, recalc, false);
		        doc.addEventListener('DOMContentLoaded', recalc, false);
		    })(document, window); 
		    $(function(){
		    $(':input').labelauty();
			$('.dowebok li input').click(function(){
				if($(this).siblings(0)[0].innerText=='设备损坏'){
					$(this).parent().parent().siblings('.weui_cells_form').show()
				}
				if($(this).siblings(0)[0].innerText=='设备完好'){
					$(this).parent().parent().siblings('.weui_cells_form').hide()
				}
		})
			$('.weui_btn_primary').click(function(){
				if($("input[type='radio']:checked").length==10){
					
				}else{
					alert('请确认所有区域设备是否完好')
				}
			})
});

	</script>
	
	<style>
		body{
			line-height: 1.4;
		}
		.checkBox{
			text-align: center;
			font-size: 0.48rem;
			font-weight: 500;
			font-family: "宋体";
			margin-bottom: 0.2rem;
			margin-top: 0.2rem;
		}
		.areaBox{
			padding: 0 5%;
		}
		.checkArea{
			font-size: 0.36rem;
			font-family: "微软雅黑";
		}
		.checkradio{
			font-size: 0.36rem;
		}
		ul { 
			list-style-type: none;    
			padding-left: 5%;
    		}
		li { display: inline-block;}
		.dowebok li:nth-child(1){
			margin-right:0.4rem ;
		}
		.weui_cells {
			margin-top: 0;
			margin-bottom: 0.2rem;
		}
		.weui_btn_primary {
		    width: 80%;
		}
	</style>
	<body background="images/vote_bg.png">
		<div class='checkBox'>区域设备检查</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.1 大厅观影区</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio" data-labelauty="设备完好"></li>		
				<li><input type="radio" name="radio" data-labelauty="设备损坏"></li>
			</ul>

		    <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.2 VR游戏区</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio1" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio1" data-labelauty="设备损坏"></li>
			</ul>
			
		    <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.3 台球区</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio2" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio2" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.4 电脑房</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio3" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio3" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.5 X-Box区</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio4" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio4" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.6 街机区</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio5" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio5" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.7 KTV房</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio6" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio6" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.8 麻将房</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio7" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio7" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.9 棋牌室</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio8" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio8" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<div class='areaBox'>
			<div class='checkArea'>NO.10 卫生间</div>
			<ul class="dowebok">
				<li><input type="radio" name="radio9" data-labelauty="设备完好"></li>
				<li><input type="radio" name="radio9" data-labelauty="设备损坏"></li>
			</ul>
			 <div class="weui_cells weui_cells_form" style='display: none;'>
		      <div class="weui_cell">
		        <div class="weui_cell_bd weui_cell_primary">
		          <div class="weui_uploader">
		            <div class="weui_uploader_hd weui_cell">
		              <div class="weui_cell_bd weui_cell_primary">图片上传</div>
		              <div class="weui_cell_ft js_counter">0/6</div>
		            </div>
		            <div class="weui_uploader_bd">
		              <ul class="weui_uploader_files">
		                <!-- 预览图插入到这 -->
		              </ul>
		              <div class="weui_uploader_input_wrp">
		                <input capture='camera' class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
		              </div>
		            </div>
		          </div>
		        </div>
		      </div>
		    </div>
 
		      <div class="weui_dialog_alert" style="display: none;">
			    <div class="weui_mask"></div>
			    <div class="weui_dialog">
			      <div class="weui_dialog_hd"><strong class="weui_dialog_title">警告</strong></div>
			      <div class="weui_dialog_bd">弹窗内容，告知当前页面信息等</div>
			      <div class="weui_dialog_ft">
			        <a href="javascript:;" class="weui_btn_dialog primary">确定</a>
			      </div>
			    </div>
			  </div>
		</div>
		<a href="javascript:;" class="weui_btn weui_btn_primary">提交</a>
	</body>
	<script>
      $.weui = {};
		$.weui.alert = function(options){
		    options = $.extend({title: '警告', text: '警告内容'}, options);
		    var $alert = $('.weui_dialog_alert');
		    $alert.find('.weui_dialog_title').text(options.title);
		    $alert.find('.weui_dialog_bd').text(options.text);
		    $alert.on('touchend click', '.weui_btn_dialog', function(){
		        $alert.hide();
		    });
		    $alert.show();
		};

$(function () {
    // 允许上传的图片类型
    var allowTypes = ['image/jpg', 'image/jpeg', 'image/png', 'image/gif'];
    // 1024KB，也就是 1MB
    var maxSize = 2048 * 2048;
    // 图片最大宽度
    var maxWidth = 300;
    // 最大上传图片数量
    var maxCount = 6;
    $('.js_file').on('change', function (event) {
        var files = event.target.files;
        var that1=$(this);
		var that2=$(this).parent().siblings(0);
		var that3=$(this).parent().parent().siblings('.weui_uploader_hd').children('.js_counter')
        // 如果没有选中文件，直接返回
        if (files.length === 0) {
            return;
        }

        for (var i = 0, len = files.length; i < len; i++) {
            var file = files[i];
            var reader = new FileReader();

            // 如果类型不在允许的类型范围内
            if (allowTypes.indexOf(file.type) === -1) {
                $.weui.alert({text: '该类型不允许上传'});
                continue;
            }

            if (file.size > maxSize) {
                $.weui.alert({text: '图片太大，不允许上传'});
                continue;
            }

            if ($('.weui_uploader_file').length >= maxCount) {
                $.weui.alert({text: '最多只能上传' + maxCount + '张图片'});
                return;
            }

            reader.onload = function (e) {
                var img = new Image();
                img.onload = function () {
                    // 不要超出最大宽度
                    var w = Math.min(maxWidth, img.width);
                    // 高度按比例计算
                    var h = img.height * (w / img.width);
                    var canvas = document.createElement('canvas');
                    var ctx = canvas.getContext('2d');
                    // 设置 canvas 的宽度和高度
                    canvas.width = w;
                    canvas.height = h;
                    ctx.drawImage(img, 0, 0, w, h);
                    var base64 = canvas.toDataURL('image/png');

                    // 插入到预览区
                    var $preview = $('<li class="weui_uploader_file weui_uploader_status" style="background-image:url(' + base64 + ')"><div class="weui_uploader_status_content">0%</div></li>');
                   	that2.append($preview);
                    var num = that2.children('.weui_uploader_file').length;
                    that3.text(num + '/' + maxCount);

                    // 然后假装在上传，可以post base64格式，也可以构造blob对象上传，也可以用微信JSSDK上传

                    var progress = 0;
                    function uploading() {
                        $preview.find('.weui_uploader_status_content').text(++progress + '%');
                        if (progress < 100) {
                            setTimeout(uploading, 30);
                        }
                        else {
                            // 如果是失败，塞一个失败图标
                            //$preview.find('.weui_uploader_status_content').html('<i class="weui_icon_warn"></i>');
                            $preview.removeClass('weui_uploader_status').find('.weui_uploader_status_content').remove();
                        }
                    }
                    setTimeout(uploading, 30);
                };

                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
});
  </script>
</html>
    